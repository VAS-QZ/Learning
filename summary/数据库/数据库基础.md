# 数据库基础

[TOC]

## 事务特点ACID

- 原子性（Atomicity）：不可再分
- 一致性（Consistancy）：事务执行前后符合逻辑
- 隔离性（Isolation）：事务之间互相隔离
- 持久性（Durability）：事务结束后不会由于外部原因导致数据丢失



## 事务隔离级别及MVCC

不同的事务操作可能会存在一定的冲突问题，主要分为三大类

- 脏读：A事务操作了数据，但是并没有提交事务，B事务在查询时查询到了A更新后的数据
- 不可重复读：B事务第一次查询的数据是1，此时A事务提交了更新操作，将数据更新为2，此时B时候再进行查询的时候发现查询结果为2
- 幻读：B事务第一次查询的数据为3条，此时A事务提交了插入操作，B再进行查询时发现查询结果为4

对应的就有4种数据库事务隔离级别

- Read Uncommited（读取未提交）：可以读取未提交的事务，无法规避上述问题
- Read Commited（读取已提交）：只可以读取已提交的事务，可以规避脏读问题
- Repeatable Read（可重复度）：规避重复读的问题
- Serializable：串行化

### MVCC

多版本并发控制





## 数据库表范式

- 第一范式：列不可再分
- 第二范式：一张表只做一件事，所有的字段都必须与主键有关系
- 第三范式：所有字段都与主键直接关联



## 数据库字段约束

| 约束类型   | 支持数据库        |
| ---------- | ----------------- |
| 非空约束   | postgresql、mysql |
| 主键约束   | postgresql、mysql |
| 唯一约束   | postgresql、mysql |
| 外键约束   | postgresql、mysql |
| 默认值约束 | mysql             |
| 检查约束   | postgresql、mysql |
| 自增约束   | mysql             |
| 排除约束   | postgresql        |



## 数据库概念模型

层次模型

网状模型

关系模型